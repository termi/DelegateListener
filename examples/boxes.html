<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>jquery.delegate - Demos</title>
<style type="text/css" media="screen">
body {
	font: 12px/16px Verdana, Arial, Helvetica, sans-serif;
	color: #002;
	padding: 0;
	margin: 20px;
	}
code {
	display: block;
	background: #F9F9F9;
	border: 1px dashed #ABC;
	font: 12px/16px "Courier New", Courier, monospace;
	padding: 10px;
	margin: 0 0 30px 0;
	white-space: pre;
	}
.str { color: #00A; }
.kwd { color: #808; }
.com { color: #777; }
.typ { color: #088; }
.lit { color: #800; }
.pun { color: #000; }
.pln { color: #002; }
.tag { color: #008; }
.atn { color: #606; }
.atv { color: #080; }
.dec { color: #606; }
p { margin: 0 0 5px 0; }
.box {
	padding: 10px 20px;
	background: #CCC;
	border: 1px solid #AAA;
	text-align: center;
	font-size: 10px;
	margin: 0 0 10px 0;
	}	
.blue {
	background-color: #CCF;
	border-color: #AAD;
	}
.green {
	background-color: #CFC;
	border-color: #ADA;
	}
.red {
	background-color: #FCC;
	border-color: #DAA;
	}
</style>
<!--[if lt IE 9]>
<script src="https://raw.github.com/termi/ES5-DOM-SHIM/master/__COMPILE/a.ie8.js"></script>
<![endif]-->
<!--[if lt IE 8]>
<script src="https://raw.github.com/termi/ES5-DOM-SHIM/master/__COMPILE/a.ielt8.js"></script>
<![endif]-->
<script src="https://raw.github.com/termi/ES5-DOM-SHIM/master/__COMPILE/a.js"></script>
<script src="../__SRC/DelegateListener.js"></script>
<script>
//aliases
$ = Function.prototype.bind.call(document.getElementById, document);
$$ = Function.prototype.bind.call(document.querySelectorAll, document);
$$0 = Function.prototype.bind.call(document.querySelector, document);

function main() {
	// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	var $demo = $('demo_box'), 
		$sections = $$('div.section'), 
		$currentDelegat,
		samples = [
			// DEMO ONE ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
			function(){
				$currentDelegat = [DelegateListener(".box", function(e) {
				  e.target.classList.toggle("green");
				})];
				$demo.addEventListener("click", $currentDelegat[0]);
			},
			// DEMO TWO ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~	
			function(){
				$currentDelegat = [DelegateListener(".box", function(e) {
					e.target.classList.toggle("green");
					return false;
				})];
				$demo.addEventListener("click", $currentDelegat[0]);
			},
			// DEMO THREE ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~	
			function(){
				$currentDelegat = [
					DelegateListener(".layer1, .layer3", function(){
						 e.target.classList.toggle('green');
					}),
					DelegateListener(".layer0, .layer2, .layer4", function(){ 
						e.target.classList.toggle('red'); 
						return false;
					})
				];
				$demo.addEventListener("click", $currentDelegat[0]);
				$demo.addEventListener("click", $currentDelegat[1]);
			},
			// DEMO FOUR ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~	
			function(){
				$currentDelegat = [DelegateListener(".layer0, .layer1, .layer2, .layer3", function(){ 
					e.target.classList.toggle('blue');
				})];
				$demo.addEventListener("click", $currentDelegat[0]);
			},
			// DEMO FIVE ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~	
			function(){
				/*$demo.delegate('mouseover mouseout','.layer0, .layer1, .layer2',function( event ){ 
					$( this ).toggleClass('blue')
					})
					.undelegate('mouseover mouseout','.layer1, .layer2')
					.undelegate('mouseout');*/
			}
			];
	
	function _hide(el) {
		el.style.display = "none";
	}
	function _show(el) {
		el.style.display = "none";
	}
	
	$('demo_select').addEventListener("change", function(){
		var i = parseInt( this.value );
		
		$sections.forEach(_hide);
		if($sections[i])_show($sections[i]);
		
		if($currentDelegat) {
			$currentDelegat.forEach($demo.removeEventListener.bind($demo, "click"));
			$$(".box").forEach(function(el) {
				el.classList.remove("red");
				el.classList.remove("green");
				el.classList.remove("blue");
			})
		}
		
		samples[ i ]();
	})
	$('demo_select').dispatchEvent(new Event('change'));
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
}

document.addEventListener('DOMContentLoaded', main);
</script>
</head>

<body>
<h2>Demos / purejs.delegate.js / </h2>

<div class="box layer0" id="demo_box">
	#demo_box.box.layer0	
	<div class="box layer1">
		.box.layer1
		<div class="box layer2">
			.box.layer2
			<div class="box layer3">
				.box.layer3
				<div class="box layer4">
					.box.layer4
					</div>
				</div>
			</div>
		</div>
	</div>

	<p>
		<select id="demo_select">
			<option value="0">Demo 1, Propagate</option>
			<option value="1">Demo 2, Don't Propagate</option>
			<option value="2">Demo 3, Mixed Propagation</option>
			<option value="3">Demo 4, Mouseenter Mouseleave</option>
			<option value="4">Demo 5, Undelegate</option>
			</select>
		&laquo; Choose a code sample to apply to the &lt;div&gt;s above.
		</p>
		
<!-- demo one -->		
<div class="section">
<p>This example shows clicks that propagate up the parent chain, and the handler is called at each layer. If you click inside the innermost div (".layer4"), all the divs will toggle green.</p>
<code>$('#demo_box')
	.delegate('click','.box',function(){ 
		$( this ).toggleClass('green'); 
		});</code>
	</div>
	
<!-- demo two -->
<div class="section">
<p>This example shows clicks that do not propagate up the parent chain, and the handler is called only at each click. If you click inside the innermost div (".layer4"), only that div will toggle green.</p>
<code>$('#demo_box')
	.delegate('click','.box',function(){ 
		$( this ).toggleClass('green'); 
		return false;
		});</code>
	</div>

<!-- demo three -->
<div class="section">
<p>This example shows that you can delegate multiple comma-seperated selectors with any given handler. Clicks within ".layer1" or ".layer3" will toggle that layer green and propagate to the next layer. The remaining layers will toggle red, and will not propagate.</p>
<code>$('#demo_box')
	.delegate('click','.layer1, .layer3',function(){ 
		$( this ).toggleClass('green'); 
		})
	.delegate('click','.layer0, .layer2, .layer4',function(){ 
		$( this ).toggleClass('red'); 
		return false;
		});</code>
	</div>

<!-- demo four -->
<div class="section">
<p>This example shows that you can delegate multiple space-seperated events to multiple selectors with a single handler. The result of delegating these two events, is mimicking mouseenter and mousleave behavior. When moving onto the child element, the mouseout event propagates and then the mousover event propagates immediately after, so in appearance they cancel each other out.</p>
<code>$('#demo_box')			
	.delegate('mouseover mouseout','.layer0, .layer1, .layer2, .layer3',function(){ 
		$( this ).toggleClass('blue'); 
		});</code>
	</div>

<!-- demo five -->
<div class="section">
<p>This example shows that you can undelegate multiple space-seperated events from multiple selectors, in any order. The only remaining delegation is "mouseover" on ".layer0"</p>
<code>$('#demo_box')			
	.delegate('mouseover mouseout','.layer0, .layer1, .layer2',function( event ){ 
		$( this ).toggleClass('blue')
		})
	.undelegate('mouseover mouseout','.layer1, .layer2')
	.undelegate('mouseout');</code>
	</div>

</body>
</html>
